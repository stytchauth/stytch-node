"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Organizations = void 0;
var _method_options = require("../shared/method_options");
var _organizations_members = require("./organizations_members");
var _shared = require("../shared");
// !!!
// WARNING: This file is autogenerated
// Only modify code within MANUAL() sections
// or your changes may be overwritten later!
// !!!

// Request type for `organizations.create`.

// Response type for `organizations.create`.

// Request type for `organizations.delete`.

// Response type for `organizations.delete`.

// Request type for `organizations.get`.

// Response type for `organizations.get`.

// Request type for `organizations.search`.

// Response type for `organizations.search`.

// Request type for `organizations.update`.

// Response type for `organizations.update`.

// MANUAL(SearchQueryOperand)(TYPES)

// ENDMANUAL(SearchQueryOperand)

class Organizations {
  constructor(fetchConfig) {
    this.fetchConfig = fetchConfig;
    this.members = new _organizations_members.Members(this.fetchConfig);
  }

  /**
   * Creates an Organization. An `organization_name` and a unique `organization_slug` are required.
   *
   * By default, `email_invites` and `sso_jit_provisioning` will be set to `ALL_ALLOWED`, and `mfa_policy`
   * will be set to `OPTIONAL` if no Organization authentication settings are explicitly defined in the
   * request.
   *
   * *See the [Organization authentication settings](https://stytch.com/docs/b2b/api/org-auth-settings)
   * resource to learn more about fields like `email_jit_provisioning`, `email_invites`,
   * `sso_jit_provisioning`, etc., and their behaviors.
   * @param data {@link B2BOrganizationsCreateRequest}
   * @returns {@link B2BOrganizationsCreateResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  create(data) {
    const headers = {};
    return (0, _shared.request)(this.fetchConfig, {
      method: "POST",
      url: `/v1/b2b/organizations`,
      headers,
      data
    });
  }

  /**
   * Returns an Organization specified by `organization_id`.
   * @param params {@link B2BOrganizationsGetRequest}
   * @returns {@link B2BOrganizationsGetResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  get(params) {
    const headers = {};
    return (0, _shared.request)(this.fetchConfig, {
      method: "GET",
      url: `/v1/b2b/organizations/${params.organization_id}`,
      headers,
      params: {}
    });
  }

  /**
   * Updates an Organization specified by `organization_id`. An Organization must always have at least one
   * auth setting set to either `RESTRICTED` or `ALL_ALLOWED` in order to provision new Members.
   *
   * *See the [Organization authentication settings](https://stytch.com/docs/b2b/api/org-auth-settings)
   * resource to learn more about fields like `email_jit_provisioning`, `email_invites`,
   * `sso_jit_provisioning`, etc., and their behaviors.
   *
   * Our RBAC implementation offers out-of-the-box handling of authorization checks for this endpoint. If you
   * pass in
   * a header containing a `session_token` or a `session_jwt` for an unexpired Member Session, we will check
   * that the
   * Member Session has the necessary permissions. The specific permissions needed depend on which of the
   * optional fields
   * are passed in the request. For example, if the `organization_name` argument is provided, the Member
   * Session must have
   * permission to perform the `update.info.name` action on the `stytch.organization` Resource.
   *
   * If the Member Session does not contain a Role that satisfies the requested permissions, or if the
   * Member's Organization
   * does not match the `organization_id` passed in the request, a 403 error will be thrown. Otherwise, the
   * request will
   * proceed as normal.
   *
   * To learn more about our RBAC implementation, see our
   * [RBAC guide](https://stytch.com/docs/b2b/guides/rbac/overview).
   * @param data {@link B2BOrganizationsUpdateRequest}
   * @param options {@link B2BOrganizationsUpdateRequestOptions}
   * @returns {@link B2BOrganizationsUpdateResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  update(data, options) {
    const headers = {};
    if (options?.authorization) {
      (0, _method_options.addAuthorizationHeaders)(headers, options.authorization);
    }
    return (0, _shared.request)(this.fetchConfig, {
      method: "PUT",
      url: `/v1/b2b/organizations/${data.organization_id}`,
      headers,
      data: {
        organization_name: data.organization_name,
        organization_slug: data.organization_slug,
        organization_logo_url: data.organization_logo_url,
        trusted_metadata: data.trusted_metadata,
        sso_default_connection_id: data.sso_default_connection_id,
        sso_jit_provisioning: data.sso_jit_provisioning,
        sso_jit_provisioning_allowed_connections: data.sso_jit_provisioning_allowed_connections,
        email_allowed_domains: data.email_allowed_domains,
        email_jit_provisioning: data.email_jit_provisioning,
        email_invites: data.email_invites,
        auth_methods: data.auth_methods,
        allowed_auth_methods: data.allowed_auth_methods,
        mfa_policy: data.mfa_policy,
        rbac_email_implicit_role_assignments: data.rbac_email_implicit_role_assignments,
        mfa_methods: data.mfa_methods,
        allowed_mfa_methods: data.allowed_mfa_methods
      }
    });
  }

  /**
   * Deletes an Organization specified by `organization_id`. All Members of the Organization will also be
   * deleted. /%}
   * @param data {@link B2BOrganizationsDeleteRequest}
   * @param options {@link B2BOrganizationsDeleteRequestOptions}
   * @returns {@link B2BOrganizationsDeleteResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  delete(data, options) {
    const headers = {};
    if (options?.authorization) {
      (0, _method_options.addAuthorizationHeaders)(headers, options.authorization);
    }
    return (0, _shared.request)(this.fetchConfig, {
      method: "DELETE",
      url: `/v1/b2b/organizations/${data.organization_id}`,
      headers,
      data: {}
    });
  }

  /**
   * Search for Organizations. If you send a request with no body params, no filtering will be applied and
   * the endpoint will return all Organizations. All fuzzy search filters require a minimum of three
   * characters.
   * @param data {@link B2BOrganizationsSearchRequest}
   * @returns {@link B2BOrganizationsSearchResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  search(data) {
    const headers = {};
    return (0, _shared.request)(this.fetchConfig, {
      method: "POST",
      url: `/v1/b2b/organizations/search`,
      headers,
      data
    });
  }
}
exports.Organizations = Organizations;