"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Members = void 0;
var _shared = require("../shared");
// !!!
// WARNING: This file is autogenerated
// Only modify code within MANUAL() sections
// or your changes may be overwritten later!
// !!!

// Request type for `organizations.members.create`.

// Response type for `organizations.members.create`.

// Request type for `organizations.members.dangerouslyGet`.

// Request type for `organizations.members.deleteMFAPhoneNumber`.

// Response type for `organizations.members.deleteMFAPhoneNumber`.

// Request type for `organizations.members.deletePassword`.

// Response type for `organizations.members.deletePassword`.

// Request type for `organizations.members.delete`.

// Response type for `organizations.members.delete`.

// Request type for `organizations.members.get`.

// Response type for `organizations.members.get`.

// Request type for `organizations.members.reactivate`.

// Response type for `organizations.members.reactivate`.

// Request type for `organizations.members.search`.

// Response type for `organizations.members.search`.

// Request type for `organizations.members.update`.

// Response type for `organizations.members.update`.

class Members {
  constructor(fetchConfig) {
    this.fetchConfig = fetchConfig;
  }

  /**
   * Updates a Member specified by `organization_id` and `member_id`.
   * @param data {@link B2BOrganizationsMembersUpdateRequest}
   * @returns {@link B2BOrganizationsMembersUpdateResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  update(data) {
    return (0, _shared.request)(this.fetchConfig, {
      method: "PUT",
      url: `/v1/b2b/organizations/${data.organization_id}/members/${data.member_id}`,
      data: {
        name: data.name,
        trusted_metadata: data.trusted_metadata,
        untrusted_metadata: data.untrusted_metadata,
        is_breakglass: data.is_breakglass,
        mfa_phone_number: data.mfa_phone_number,
        mfa_enrolled: data.mfa_enrolled
      }
    });
  }

  /**
   * Deletes a Member specified by `organization_id` and `member_id`.
   * @param data {@link B2BOrganizationsMembersDeleteRequest}
   * @returns {@link B2BOrganizationsMembersDeleteResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  delete(data) {
    return (0, _shared.request)(this.fetchConfig, {
      method: "DELETE",
      url: `/v1/b2b/organizations/${data.organization_id}/members/${data.member_id}`,
      data: {}
    });
  }

  /**
   * Reactivates a deleted Member's status and its associated email status (if applicable) to active,
   * specified by `organization_id` and `member_id`.
   * @param data {@link B2BOrganizationsMembersReactivateRequest}
   * @returns {@link B2BOrganizationsMembersReactivateResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  reactivate(data) {
    return (0, _shared.request)(this.fetchConfig, {
      method: "PUT",
      url: `/v1/b2b/organizations/${data.organization_id}/members/${data.member_id}/reactivate`,
      data: {}
    });
  }

  /**
   * Delete a Member's MFA phone number.
   *
   * To change a Member's phone number, you must first call this endpoint to delete the existing phone number.
   *
   * Existing Member Sessions that include a phone number authentication factor will not be revoked if the
   * phone number is deleted, and MFA will not be enforced until the Member logs in again.
   * If you wish to enforce MFA immediately after a phone number is deleted, you can do so by prompting the
   * Member to enter a new phone number
   * and calling the [OTP SMS send](https://stytch.com/docs/b2b/api/otp-sms-send) endpoint, then calling the
   * [OTP SMS Authenticate](https://stytch.com/docs/b2b/api/authenticate-otp-sms) endpoint.
   * @param data {@link B2BOrganizationsMembersDeleteMFAPhoneNumberRequest}
   * @returns {@link B2BOrganizationsMembersDeleteMFAPhoneNumberResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  deleteMFAPhoneNumber(data) {
    return (0, _shared.request)(this.fetchConfig, {
      method: "DELETE",
      url: `/v1/b2b/organizations/${data.organization_id}/members/mfa_phone_numbers/${data.member_id}`,
      data: {}
    });
  }

  /**
   * Search for Members within specified Organizations. An array with at least one `organization_id` is
   * required. Submitting an empty `query` returns all non-deleted Members within the specified Organizations.
   *
   * *All fuzzy search filters require a minimum of three characters.
   * @param data {@link B2BOrganizationsMembersSearchRequest}
   * @returns {@link B2BOrganizationsMembersSearchResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  search(data) {
    return (0, _shared.request)(this.fetchConfig, {
      method: "POST",
      url: `/v1/b2b/organizations/members/search`,
      data
    });
  }

  /**
   * Delete a Member's password.
   * @param data {@link B2BOrganizationsMembersDeletePasswordRequest}
   * @returns {@link B2BOrganizationsMembersDeletePasswordResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  deletePassword(data) {
    return (0, _shared.request)(this.fetchConfig, {
      method: "DELETE",
      url: `/v1/b2b/organizations/${data.organization_id}/members/passwords/${data.member_password_id}`,
      data: {}
    });
  }

  /**
   * Get a Member by `member_id`. This endpoint does not require an `organization_id`, so you can use it to
   * get members across organizations. This is a dangerous operation. Incorrect use may open you up to
   * indirect object reference (IDOR) attacks. We recommend using the
   * [Get Member](https://stytch.com/docs/b2b/api/get-member) API instead.
   * @param data {@link B2BOrganizationsMembersDangerouslyGetRequest}
   * @returns {@link B2BOrganizationsMembersGetResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  dangerouslyGet(params) {
    return (0, _shared.request)(this.fetchConfig, {
      method: "GET",
      url: `/v1/b2b/organizations/members/dangerously_get/${params.member_id}`,
      params: {}
    });
  }

  /**
   * Creates a Member. An `organization_id` and `email_address` are required.
   * @param data {@link B2BOrganizationsMembersCreateRequest}
   * @returns {@link B2BOrganizationsMembersCreateResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  create(data) {
    return (0, _shared.request)(this.fetchConfig, {
      method: "POST",
      url: `/v1/b2b/organizations/${data.organization_id}/members`,
      data: {
        email_address: data.email_address,
        name: data.name,
        trusted_metadata: data.trusted_metadata,
        untrusted_metadata: data.untrusted_metadata,
        create_member_as_pending: data.create_member_as_pending,
        is_breakglass: data.is_breakglass,
        mfa_phone_number: data.mfa_phone_number,
        mfa_enrolled: data.mfa_enrolled
      }
    });
  }

  /**
   * Get a Member by `member_id` or `email_address`.
   * @param data {@link B2BOrganizationsMembersGetRequest}
   * @returns {@link B2BOrganizationsMembersGetResponse}
   * @async
   * @throws A {@link StytchError} on a non-2xx response from the Stytch API
   * @throws A {@link RequestError} when the Stytch API cannot be reached
   */
  get(params) {
    return (0, _shared.request)(this.fetchConfig, {
      method: "GET",
      url: `/v1/b2b/organizations/${params.organization_id}/member`,
      params: {
        ...params
      }
    });
  }
}
exports.Members = Members;